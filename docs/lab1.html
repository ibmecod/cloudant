<!DOCTYPE html>

<html lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
  <meta charset="utf-8">

  <title>Cloudant Lab 1</title>
  <link rel="stylesheet" href=
  "http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" type="text/css">
  <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript">
</script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js" type="text/javascript">
</script>
  <link rel="stylesheet" href="/resources/demos/style.css" type="text/css">
  <script type="text/javascript">
$(function() {
    $( "#tabs" ).tabs();
    
    		$( "#inscode" ).click(function( event ) {
                                var mycloudanturl = $('#cloudanturl').val();
                                        //alert(cloudanturl);
                                        var currentTab = $("#tabs").tabs("option", "active");
                                        $('#tabs').tabs('option', 'active', (currentTab==0?1:0));
                                        
                                        
                                
                                $("a[href^='http://CLOUDANTURL']").each(function() { 
                                        this.href = this.href.replace(/http:\/\/cloudanturl/, mycloudanturl);
                                });
                                        
 							$(".TEXTCLOUDANTURL").text(function () {
    								return $(this).text().replace("http://TEXTCLOUDANTURL", mycloudanturl); 
							});
                                
                });
                                
                                
  });
  </script>
  <style type="text/css">
div.c12 {margin-left: 80px;}
  p.c11 {color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; background-color: rgb(255, 255, 255); margin-left: 80px;}
  p.c10 {color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; background-color: rgb(255, 255, 255); font-weight: bold; margin-left: 40px;}
  span.c9 {color: rgb(51, 51, 51); font-family: Consolas,'Liberation Mono',Menlo,Courier,monospace; font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 16.8px; text-align: start; text-indent: 0px; text-transform: none; white-space: pre; widows: 1; word-spacing: 0px; display: inline ! important; float: none; background-color: rgb(255, 255, 255);}
  ul.c8 {color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; background-color: rgb(255, 255, 255);}
  span.c7 {text-decoration: underline;}
  big.c6 {font-weight: bold;}
  span.c5 {font-family: 'Times New Roman';}
  div.c4 {margin-left: 40px;}
  span.c3 {font-weight: bold;}
  p.c2 {color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; background-color: rgb(255, 255, 255); margin-left: 40px;}
  p.c1 {color: rgb(0, 0, 0); font-family: 'Times New Roman'; font-size: medium; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; background-color: rgb(255, 255, 255);}
  </style>
</head>

<body>
  <div id="tabs">
    <ul>
      <li><a href="#tabs-1">Pre-Requisite</a></li>

      <li><a href="#tabs-2">Lab Instructions</a></li>

      <li><a href="#tabs-3">About</a></li>
    </ul>

    <div id="tabs-1">
      <p>You must complete this section FULLY before proceeding to the LAB in the next
      tab</p>

      <p class="c1"><strong><em>Excercise 1 &nbsp;-
      &nbsp;Pre-Requisite</em></strong></p><strong>Step 1a- Setup Cloudant Service
      instance</strong>

      <p class="c1">&nbsp;- Log into your Bluemix dashboard&nbsp;</p>

      <p class="c1">-&nbsp;Click Catalog at the top menu &gt;&gt; Select Data &amp;
      AnalyNcs under Services &gt;&gt; Select Cloudant NoSQL DB to create an
      instance.</p>

      <p class="c2"><img src="lab_files/image010.png" v:shapes="Picture_x0020_10" height=
      "205" width="444">&nbsp;&nbsp;&nbsp;</p>

      <p class="c1">&nbsp;Step 1b - Fill out the settings as the following
      example.&nbsp;</p>Leave the service unbound (not used by any application)&nbsp;<br>
      &nbsp;Give your own <span class="c3">unique name</span> as suffix (like you first
      name etc) to the service.&nbsp;<br>
      Take the default for other entries. &gt;&gt; Then, Click Use Button.<br>

      <div class="c4">
        <img src="lab_files/image012.png" v:shapes="Picture_x0020_13" height="246" width=
        "178"><br>
      </div><span class="c5"><br>
      Step 1c</span> - You should find the following screen when the Cloudant DB instance
      is created. Click the Launch Button&nbsp;<br>
      <br>

      <div class="c4">
        &nbsp;&nbsp;<img src="lab_files/image014.png" v:shapes="Picture_x0020_17" height=
        "107" width="588">&nbsp;<br>
      </div><br>
      Step 1d - &nbsp;&nbsp;Click Add New Database. &gt;&gt; Add&nbsp;<big class=
      "c6">cars</big> &gt;&gt; Click Create.&nbsp;

      <p class="c2"><img src="lab_files/image016.png" v:shapes="Picture_x0020_19" height=
      "100" width="762">&nbsp;&nbsp;</p>

      <p class="c1"><strong><br></strong></p>

      <p class="c1">Step 1e -&nbsp; Copy URL to access the Cloudant Service</p>

      <p class="c1">Navigate back to the DB service main page. Click Service Credentials.
      &gt;&gt; Copy URL to access the DB remotely.&nbsp;</p>

      <p class="c2"><img src="lab_files/image018.png" v:shapes="Picture_x0020_22" height=
      "275" width="767"></p>The URL format is https://<span class=
      "c3">username</span>:<span class="c3">password</span>@<span class=
      "c3">username</span>.cloudant.com&nbsp;

      <p class="c1"><span class="c7">Please note username and password which are
      generated by the Bluemix service will look like long strings.</span></p>

      <p class="c1"><strong>NOW your&nbsp;Cloudant Service setup is COMPLETE</strong></p>

      <p class="c1">PASTE the URL below and Click the Button</p>

      <p class="c1"><span class="c7">to get Instructions for Next
      Exercises</span></p><strong><br></strong>

      <form id="form_script">
        <p>Enter the Complete Cloudant Repository URL info</p>

        <p><input id="cloudanturl" size="55" name="cloudanturlname" value=
        "https://ishederyiningstedialwari:c022ad2f0722e35b0344d04a36858c9320892099@laksri.cloudant.com"></p>

        <p>The URL format is https://username:password@username.cloudant.com</p>

        <p><input id="inscode" type="button" value="Create Instruction"></p>
      </form>
    </div>

    <div id="tabs-2">
      <p>Exercise 2 to 5 - Ensure you have completed Pre-requisite Exercise 1</p>

      <p class="c1"><strong><em>Excercise 2 &nbsp;- &nbsp;Populating Data into Cloudant
      Database</em></strong></p>

      <p class="c1"><strong><em>Step 2a - Go to Url below and Download the Zip file
      version of the Repository</em></strong></p>

      <p class="c1"><a href=
      "https://github.com/ibmecod/cloudantLab"><strong><em>https://github.com/ibmecod/cloudantLab</em></strong></a></p>

      <p class="c2">&nbsp;<img src="lab_files/image002.png" v:shapes="Picture_x0020_2"
      height="44" width="895">&nbsp;&nbsp;<img src="lab_files/image004.png" v:shapes=
      "Picture_x0020_4" height="336" width="575">&nbsp;&nbsp;</p>

      <p class="c1">Step 2b - Unzip cloudantLB-master.zip file.</p>

      <p class="c2"><img src="lab_files/image006.png" v:shapes="Picture_x0020_6" height=
      "144" width="472"></p>

      <p class="c1"></p>

      <p class="c1"><strong>Step 2c - Upload lab data to Cloudant DB</strong></p>

      <ul class="c8">
        <li>Navigate to the local folder where you previously unzipped the lab
        material.&nbsp;</li>

        <li>Locate &amp; Open upload.bat. &gt;&gt; Replace the url with <a href=
        "http://CLOUDANTURL" target="_blank"><div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL</div>
          
        </a>
        </li>
      </ul>

      <p class="c2">The batchfile would look like this..
      <code>
        <span class="c9">
      	curl -vX POST <div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL/cars/_bulk_docs -d @- -k -# -o output -H"Content-Type: application/json" &lt;data.json</div>
      	</span> 
      </code>

      <p class="c1">Step 2d - Check if you have <span class="c3">curl</span> installed by
      typing <span class="c3">curl</span> at command line&nbsp;</p>

      <p class="c2">(Ensure it is in Path&nbsp;to run, Mac OS X and Linux have curl
      typically built-in)</p>

      <p class="c2">If curl is not recognized, double click curl-7.43.0-win64-local.msi
      in the same unzipped folder.&nbsp;</p>

      <p class="c2"><img src="lab_files/image028.png" v:shapes="Picture_x0020_32" height=
      "142" width="337"></p>

      <p class="c10">Follow the instructions to complete installation.</p>

      <p class="c2">Type in curl to ensure the installation is successful. curl tool
      enables data transfer over multiple protocols, in this case, HTTPS.&nbsp;</p>

      <p class="c2">&nbsp;Run the upload.bat file or the command above. This uploads
      data.json document to the Cloudant DB instance you created in the previous
      step.&nbsp;</p>

      <p class="c2">&nbsp;<img src="lab_files/image026.png" v:shapes="Picture_x0020_31"
      height="81" width="486"></p>

      <p class="c1">&nbsp;&nbsp;<br>
      Step 2e - &nbsp;Check the output file. If successful, you should see a response
      similar to the following.</p>

      <p class="c2"><img src="lab_files/image032.png" v:shapes="Picture_x0020_36" height=
      "99" width="391">&nbsp;</p>

      <p class="c1"><strong><em>Excercise 3</em></strong> <strong>&nbsp;Create Price
      View</strong></p>

      <ul class="c8">
        <li>Step 3a - &nbsp;Navigate to cars DB. &gt;&gt; Click + symbol next to All
        Design Docs. &gt;&gt; Click New View.&nbsp;</li>
      </ul>

      <div class="c4"><img src="lab_files/image034.png" v:shapes="Picture_x0020_37"
      height="247" width="290"></div>

      <ul class="c8">
        <li>&nbsp;Step 3b - Add&nbsp;<span class="c3">query</span> next to New Deisgn
        Document &gt;&gt; Add&nbsp;<span class="c3">price</span> under Index
        Name&nbsp;</li>
      </ul>

      <div class="c4"><img src="lab_files/image036.png" v:shapes="Picture_x0020_38"
      height="417" width="295"></div>

      <ul class="c8">
        <li>&nbsp;Step 3c - Modify Map function with&nbsp;</li>
      </ul>

      <div class="c4">
        <div class="c4">
          <span class="c3">emit(doc.price, doc.id);</span><br>
        </div><br>
        &gt;&gt; Under Reduce function - Select<br>

        <div class="c4">
          <span class="c3">_count</span><br>
        </div><br>
        Click Save &amp; Build Index.&nbsp;
      </div>

      <p class="c1"></p>

      <ul class="c8">
        <li>Step 3d - Visit&nbsp; &nbsp;<a href=
        "http://CLOUDANTURL/cars/_design/query/_view/price?group=true" target=
        "_blank">
            <div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL/cars/_design/query/_view/price?group=true</div>&nbsp;
          </a>
        </li>
      </ul>

      <div class="c4">
        (If user name and password is requested, provide them from the Service
        Credentials).&nbsp;
      </div>

      <ul class="c8">
        <li>Should receive a response similar to the following.&nbsp;</li>
      </ul>

      <p class="c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="lab_files/image052.png"
      v:shapes="Picture_x0020_59" height="134" width="609">&nbsp;</p>

      <p class="c1"><strong><em>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</em></strong>Step
      3e - Visit <strong><em>to Cloudant DB using Price View for Price Range Search with
      Count</em></strong></p>

      <ul class="c8">
        <li>
          <a href=
          "http://CLOUDANTURL/cars/_design/query/_view/price?group=true&amp;startkey=5000&amp;endkey=30000"
          target="_blank">
            <div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL/cars/_design/query/_view/price?group=true&amp;startkey=5000&amp;endkey=30000</div>&nbsp;
          </a>
        </li>

        <li>Visit the above url and you should receive a response similar to the
        following.&nbsp;</li>
      </ul>

      <div class="c4">&nbsp;&nbsp;<img src="lab_files/image058.png" v:shapes=
      "Picture_x0020_62" height="125" width="710"></div>

      <p class="c2">Change the <span class="c3">endkey=10000</span> in the&nbsp;URL and
      also see the results.</p>

      <p class="c2"><img src="lab_files/image064.png" v:shapes="Picture_x0020_65" height=
      "110" width="888"></p>

      <p class="c1"><strong><em>Excercise 4</em></strong><strong><em>: Add additional
      View - &nbsp;</em></strong><strong>Make</strong></p>

      <ul class="c8">
        <li>&nbsp;_design/query document was created in the previous step.&nbsp;</li>

        <li>Step 4a - &nbsp;Click <span class="c3">on the <big>+</big></span> symbol.
        and&nbsp; Click <span class="c3">New View</span>.&nbsp;</li>

        <li>Step 4b - Add&nbsp;<span class="c3">make</span> under it</li>
      </ul>

      <p class="c11"><img src="lab_files/image038.png" v:shapes="Picture_x0020_46"
      height="251" width="354"></p>

      <ul>
        <li>Step 4c - Modify Map function with&nbsp;</li>
      </ul>

      <div class="c4">
        emit(doc.make, doc.id);&nbsp;<br>
        Select <span class="c3">_count</span> under Reduce function<br>
        Click Save &amp; Build Index.
      </div>

      <p class="c2">&nbsp;<img src="lab_files/image040.png" v:shapes="Picture_x0020_47"
      height="415" width="299">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><br>

      <p class="c2"><strong><em>Step 4d -&nbsp; REST Call to Cloudant DB using Make
      View</em></strong></p>

      &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Visit &nbsp;
      <a href=
      "http://CLOUDANTURL/cars/_design/query/_view/make?group=true" target=
      "_blank">

        <div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL/cars/_design/query/_view/make?group=true</div>
	  </a>&nbsp;
	  
      <p class="c2">Should receive a response similar to the following.</p>

      <p class="c2">&nbsp;&nbsp;<img src="lab_files/image070.png" v:shapes=
      "Picture_x0020_68" height="113" width="720">&nbsp;</p>

      <p class="c1"><strong><em>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
      Step 4e - Cloudant DB using Make View for a Specific Model Search with
      Count</em></strong></p>

      - &nbsp;Visit <a href=
      "http://CLOUDANTURL/cars/_design/query/_view/make?group=true&amp;key=%22BMW%22"
      target="_blank">

      <div id="id1">
        <div class="TEXTCLOUDANTURL">http://TEXTCLOUDANTURL</div>/cars/_design/query/_view/make?group=true&amp;key="BMW"</div>
	  </a>

      <p class="c11">Should receive a response similar to the following.</p>

      <p class="c11">&nbsp;&nbsp;<img src="lab_files/image076.png" v:shapes=
      "Picture_x0020_71" height="97" width="789">&nbsp;</p>

      <p class="c1"><strong><em>Exercise 5: Using List Function</em></strong></p>

      <p class="c2"><strong>Step 5a &nbsp;- Editing Design Document</strong></p>

      <p class="c2">(Navigate to the Cloudant DB management view.&gt;&gt; Click cars DB.
      if you have closed it)</p>

      <p class="c2">Click All Design Docs. &gt; Click pencil symbol to edit the query
      design document.</p>

      <p class="c11"><img src="lab_files/image078.png" v:shapes="Picture_x0020_72"
      height="202" width="921">&nbsp;&nbsp;&nbsp;</p>

      <p class="c2">Step 5b - &nbsp;Add the lists with makelist function as in the
      following screen.</p>

      <p class="c2">"lists": {"makelist": "funcNon(head, req) { var row; send('[');
      send('[\"Make\",\"Count\"]'); var i=0; while(row = getRow()) { send(','); var
      rkey=row.key; if (rkey==null) rkey='Data'; send('[\"'+rkey+'\",'+row.value+']');
      i++; }send(']');}" },</p>

      <p class="c2">"language": "javascript"</p>

      <p class="c2"><img src="lab_files/image080.png" v:shapes="Picture_x0020_106"
      height="542" width="962"> </p>
	
	<p class="c2">Step 5c - &nbsp;<strong>Test List Function</strong></p>
      <a href=
      "http://CLOUDANTURL/cars/_design/query/_list/makelist/make?group=true" target=
      "_blank">

      <div class="TEXTCLOUDANTURL">
      http://TEXTCLOUDANTURL/cars/_design/query/_list/makelist/make?group=true
      </div></a>
      <div class="c12">
        <img src="lab_files/image088.png" v:shapes="Picture_x0020_111" height="78" width=
        "759">&nbsp;
      </div>

      <p class="c1"></p>

      <p class="c1"><strong><em>End of Cloudant DB Lab1</em></strong></p>

      <p class="c1">&nbsp;</p>
    </div>

    <div id="tabs-3">
      <p>Production of IBM ECOD</p>
    </div>
  </div>
</body>
</html>
